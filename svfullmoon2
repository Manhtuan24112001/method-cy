LinkHook = "https://discord.com/api/webhooks/1275246779633238097/BrnFhN63DmZNzbY7l7nrLXWrzJUekyvk8bfKIDdkyNxM2QQg0CCFU2bQkZZ4aG5pCgrK" -- webhook to send the moon status

local Moon = {
    ['8'] = "http://www.roblox.com/asset/?id=9709149431", -- ðŸŒ•
    ['7'] = "http://www.roblox.com/asset/?id=9709149052", -- ðŸŒ–
    ['6'] = "http://www.roblox.com/asset/?id=9709143733", -- ðŸŒ—
    ['5'] = "http://www.roblox.com/asset/?id=9709150401", -- ðŸŒ˜
    ['4'] = "http://www.roblox.com/asset/?id=9709135895", -- ðŸŒ‘
    ['3'] = "http://www.roblox.com/asset/?id=9709139597", -- ðŸŒ’
    ['2'] = "http://www.roblox.com/asset/?id=9709150086", -- ðŸŒ“
    ['1'] = "http://www.roblox.com/asset/?id=9709149680", -- ðŸŒ”
};

local currentMoonTexture = game:GetService("Lighting").Sky.MoonTextureId
local MoonPhase = nil
local MoonIcon = ""
local MoonPercent = 0

for i, v in pairs(Moon) do
    if currentMoonTexture == v then
        MoonPhase = i
        MoonPercent = i / 8 * 100
        break
    end
end

if MoonPhase == '8' then
    MoonIcon = 'ðŸŒ•'
end

local playerCount = #game.Players:GetPlayers()

if MoonPhase == '8' and playerCount <= 6 then
    local MoonMessage = '```' .. tostring(MoonPercent .. '%' .. ' : ' .. MoonIcon) .. '```'
    local CodeServer = 'game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId,' .. '\'' .. tostring(game.JobId) .. '\'')'

    local Embed = {
        ["username"] = "Full Moon Notify",
        ["avatar_url"] = "https://cdn.discordapp.com/attachments/1258228428881137677/1258228644959096907/1705502093042.jpg",
        ["embeds"] = {
            {
                ["title"] = "**Full Moon Notify**",
                ["color"] = tonumber(00000000),
                ["type"] = "rich",
                ["fields"] = {
                    {
                        ["name"] = "Players",
                        ["value"] = '```' .. tostring(playerCount) .. '/12```',
                        ["inline"] = false
                    },
                    {
                        ["name"] = "Job Id",
                        ["value"] = '```' .. tostring(game.JobId) .. '```',
                        ["inline"] = false
                    },
                    {
                        ["name"] = "Code",
                        ["value"] = '```' .. CodeServer .. '```',
                        ["inline"] = true
                    },
                    {
                        ["name"] = "Moon",
                        ["value"] = '' .. MoonMessage .. '',
                        ["inline"] = true
                    }
                },
                ["thumbnail"] = {
                    ["url"] = "https://cdn.discordapp.com/attachments/1258228428881137677/1258228644959096907/1705502093042.jpg"
                },
                ["footer"] = {
                    ["timestamp"] = DateTime.now():ToIsoDate(),
                    ["icon_url"] = "https://cdn.britannica.com/89/145489-050-4E9609BA/moon-return-journey-Apollo-11-July-21-1969.jpg"
                }
            }
        }
    }

    local Data = game:GetService("HttpService"):JSONEncode(Embed)
    local Head = { ["content-type"] = "application/json" }
    local Send = http_request or request or HttpPost or syn.request
    
    if LinkHook ~= "" then
        Send({ Url = LinkHook, Body = Data, Method = "POST", Headers = Head })
    end
end
